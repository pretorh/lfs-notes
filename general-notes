# to use qemu:
# set LIVE_ISO to a live cd (ex arch linux)
# set DRIVE1/DRIVE2 to drive images
# redirecting port 22 on the vm to 2222 on the host

qemu-system-x86_64 \
    -m 9G -enable-kvm -redir tcp:2222::22 \
    -boot order=d \
    -cdrom LIVE_ISO \
    -drive file=DRIVE1,format=raw \
    -drive file=DRIVE2,format=raw

# ssh into vm
# start ssh on the vm (ex on arch: "systemctl start sshd")
# since the host's port 2222 is mapped to vms 22 (ssh) we can ssh to localhost on port 2222
ssh root@localhost -p 2222 -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null

# to copy sources over ssh (rsync)
# replace SOURCES with the location of local source files
rsync -avz -e "ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -p 2222" --progress SOURCES/* root@localhost:/mnt/lfs/sources/
